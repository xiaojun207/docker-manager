import{g as z,d as C,u as P}from"./app-4e6350d6.js";import{P as S,F as v,f as D}from"./docker-6b00f3d6.js";import{_ as V,I as L,r as c,x,o as g,c as u,y as N,z as A,w as l,b as i,e as p,t as r,J as _,K as f,a as I}from"./index-65c6c1a3.js";const T={data(){return{list:[],page:{currentPage:1,pageSize:10,total:0},selectRow:{},dialogDetailVisible:!1,listLoading:!0}},created(){this.fetchData()},methods:{trans(){let e={};for(const a in L)e[a]&&console.log("trans.k:",a),e[a]=a;console.log("trans.zh:",e)},fetchData(){this.trans(),this.listLoading=!0,this.listQuery={},this.listQuery.currentPage=this.page.currentPage,this.listQuery.pageSize=this.page.pageSize,z(this.listQuery).then(e=>{this.list=e.data.list,this.page=e.data.page,this.listLoading=!1})},handleSizeChange(e){this.page.pageSize=e,this.fetchData()},handleCurrentChange(e){this.page.currentPage=e,this.fetchData()},delApp(e){const a={Name:e.Name};this.listLoading=!0,C(a).then(h=>{this.$message(h.msg),this.listLoading=!1})},updateApp(e){const a={Name:e.Name};this.listLoading=!0,P(a).then(h=>{this.$message(h.msg),this.listLoading=!1})},openDetail(e){this.selectRow=e,this.dialogDetailVisible=!0},PortsToStr(e){return S(e)},PortToStr(e){const a=(e.IP?e.IP:"")+(e.PublicPort?":"+e.PublicPort:"");return(a?a+" -> ":"")+e.PrivatePort+"/"+e.Type},FormatVolumes(e){return v(e)},formatSize(e){return D(e)}}},B={class:"app-container"},F={style:{"text-indent":"-2em"}};function Q(e,a,h,M,o,d){const s=c("el-table-column"),m=c("el-button"),w=c("el-table"),y=c("el-pagination"),b=c("el-dialog"),k=x("loading");return g(),u("div",B,[N((g(),A(w,{data:o.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},{default:l(()=>[i(s,{align:"center",label:"ID",width:"65"},{default:l(t=>[p(r(t.$index+1),1)]),_:1}),i(s,{label:"AppName",width:"170"},{default:l(t=>[i(m,{type:"primary",link:"",onClick:n=>d.openDetail(t.row)},{default:l(()=>[p(r(t.row.Name),1)]),_:2},1032,["onClick"])]),_:1}),i(s,{label:"Image",width:"270"},{default:l(t=>[p(r(t.row.Image),1)]),_:1}),i(s,{label:"MaxMemory",width:"110"},{default:l(t=>[p(r(d.formatSize(t.row.Memory)),1)]),_:1}),i(s,{label:"Ports",width:"270"},{default:l(t=>[(g(!0),u(_,null,f(t.row.Ports,n=>(g(),u("div",{key:n.key},r(d.PortToStr(n)),1))),128))]),_:1}),i(s,{label:"Volumes",style:{"min-width":"150px"}},{default:l(t=>[(g(!0),u(_,null,f(t.row.Volumes,n=>(g(),u("div",{key:n.key},r(n),1))),128))]),_:1}),i(s,{label:"Env",align:"center",width:"170"},{default:l(t=>[(g(!0),u(_,null,f(t.row.scope,n=>(g(),u("div",{key:n.key},r(n),1))),128))]),_:1}),i(s,{label:e.$t("操作"),align:"center",width:"170"},{default:l(t=>[i(m,{loading:o.listLoading,size:"small",type:"danger",link:"",onClick:n=>d.delApp(t.row)},{default:l(()=>[p(r(e.$t("删除")),1)]),_:2},1032,["loading","onClick"]),i(m,{loading:o.listLoading,size:"small",type:"primary",link:"",onClick:n=>d.updateApp(t.row)},{default:l(()=>[p(r(e.$t("更新")),1)]),_:2},1032,["loading","onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[k,o.listLoading]]),i(y,{"hide-on-single-page":!0,"current-page":o.page.currentPage,"page-sizes":[10,30,50,100,200,300,400],"page-size":o.page.pageSize,layout:"prev, pager, next, jumper, sizes, total",total:o.page.total,style:{width:"500px",margin:"0 auto","margin-top":"10px"},onSizeChange:d.handleSizeChange,onCurrentChange:d.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),i(b,{modelValue:o.dialogDetailVisible,"onUpdate:modelValue":a[0]||(a[0]=t=>o.dialogDetailVisible=t),title:"详情"},{default:l(()=>[I("pre",F,"    "+r(JSON.stringify(o.selectRow,null,2))+`
          `,1)]),_:1},8,["modelValue"])])}const j=V(T,[["render",Q]]);export{j as default};
