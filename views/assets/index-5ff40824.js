import{a as D,d as S,b as C}from"./server-6055fca5.js";import{_ as v,L as N,r as g,A as V,o as h,c as y,x as z,y as k,w as a,b as l,e as o,t as n,a as c,M as L}from"./index-633674dc.js";const x={data(){return{list:[],listLoading:!0,filterSearch:{Name:""},dialogDetailVisible:!1,selectRow:{},page:{currentPage:1,pageSize:10,total:0}}},created(){this.fetchData()},methods:{statusFilter_filter(t){return{published:"success",draft:"gray",deleted:"danger"}[t]},fetchData(){this.listLoading=!0,D(this.page).then(t=>{this.listLoading=!1,this.list=t.data.list,this.page=t.data.page})},handleSizeChange(t){this.page.pageSize=t,this.fetchData()},handleCurrentChange(t){this.page.currentPage=t,this.fetchData()},deleteServer(t){t.loading=!0,S({ServerName:t.Name}).then(s=>{t.loading=!1,this.$message(this.$t("成功")),this.fetchData()})},openDetail(t){this.selectRow=t,this.dialogDetailVisible=!0,C({ServerName:t.Name}).then(s=>{this.selectRow=s.data})},handleDrag(){this.$refs.select.blur()},formatTime(t){return N(t)}}},P={class:"app-container"},I=o(" Name "),T={style:{"text-indent":"-2em"}};function M(t,s,B,R,r,d){const i=g("el-table-column"),u=g("el-button"),p=g("el-input"),m=g("el-table"),f=g("el-pagination"),_=g("el-dialog"),w=V("loading");return h(),y("div",P,[z((h(),k(m,{data:r.list.filter(e=>!r.filterSearch.Name||e.Name.toLowerCase().includes(r.filterSearch.Name.toLowerCase())),"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},{default:a(()=>[l(i,{align:"center",label:"ID",width:"95"},{default:a(e=>[o(n(e.$index+1),1)]),_:1}),l(i,{label:"Name"},{default:a(e=>[l(u,{type:"primary",link:"",onClick:b=>d.openDetail(e.row)},{default:a(()=>[o(n(e.row.Name),1)]),_:2},1032,["onClick"])]),header:a(()=>[I,l(p,{modelValue:r.filterSearch.Name,"onUpdate:modelValue":s[0]||(s[0]=e=>r.filterSearch.Name=e),placeholder:t.$t("过滤关键字"),style:{width:"140px"}},null,8,["modelValue","placeholder"])]),_:1}),l(i,{label:t.$t("运行容器"),width:"80",align:"center"},{default:a(e=>[c("span",null,n(e.row.Running+"/"+e.row.Containers),1)]),_:1},8,["label"]),l(i,{label:t.$t("镜像"),width:"170",align:"center"},{default:a(({row:e})=>[c("span",null,n(e.Images),1)]),_:1},8,["label"]),l(i,{label:"Cpu",width:"110",align:"center"},{default:a(e=>[o(n(e.row.Cpu),1)]),_:1}),l(i,{label:"MemTotal",width:"110",align:"center"},{default:a(e=>[o(n((e.row.Memory/(1024*1024)).toFixed(3)+"MB"),1)]),_:1}),l(i,{label:"Private IP",width:"150",align:"center"},{default:a(e=>[o(n(e.row.PrivateIp),1)]),_:1}),l(i,{label:"Host IP",width:"150",align:"center"},{default:a(e=>[o(n(e.row.HostIp),1)]),_:1}),l(i,{label:"Public IP",width:"150",align:"center"},{default:a(e=>[o(n(e.row.PublicIp),1)]),_:1}),l(i,{align:"center",label:"DockerVersion",width:"120"},{default:a(e=>[c("span",null,n(e.row.DockerVersion),1)]),_:1}),l(i,{align:"center",label:"LastDataTime",width:"120"},{default:a(e=>[c("span",null,n(d.formatTime(e.row.LastDataTime)),1)]),_:1}),l(i,{label:"State",width:"100",align:"center"},{default:a(e=>[c("span",{style:L({color:e.row.State==="connected"?"#03c961":"#d70404"})},n(e.row.State),5)]),_:1}),l(i,{label:t.$t("操作"),width:"100",align:"center"},{default:a(e=>[l(u,{type:"danger",link:"",onClick:b=>d.deleteServer(e.row)},{default:a(()=>[o(n(t.$t("删除")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[w,r.listLoading]]),l(f,{"hide-on-single-page":!0,"current-page":r.page.currentPage,"page-sizes":[10,30,50,100,200,300,400],"page-size":r.page.pageSize,layout:"prev, pager, next, jumper, sizes, total",total:r.page.total,style:{width:"500px",margin:"0 auto","margin-top":"10px"},onSizeChange:d.handleSizeChange,onCurrentChange:d.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),l(_,{modelValue:r.dialogDetailVisible,"onUpdate:modelValue":s[1]||(s[1]=e=>r.dialogDetailVisible=e),title:"详情",onDragDialog:d.handleDrag},{default:a(()=>[c("pre",T,"    "+n(JSON.stringify(r.selectRow,null,2))+`
          `,1)]),_:1},8,["modelValue","onDragDialog"])])}const U=v(x,[["render",M]]);export{U as default};
